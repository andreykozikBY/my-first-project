<!DOCTYPE html>
<html>
<head>
  <title>Список дел</title>
  <style>
 h1{
  margin: 0 auto;
  margin-bottom: 10px;
  width: 700px;
  height: 70px;
  border-radius: 10px;
  background-color: #232f39;
  color: #ffffff;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
  text-align: center;
  padding-bottom: 10px;
  padding-top: 5px;
  font-size: 50px;
    }
.task {
width: 500px; 
  margin: 0 auto;
  border-radius: 10px;
  box-shadow: 0 4px 8px rgba(0,0,0,0.2);
  display: block;
  align-items: center;
  gap: 10px
}

input {
  width: 400px;
  padding: 10px;
  font-size: 16px;
}
.input-group {
  display: flex;
  align-items: center;
  gap: 10px;
  margin-bottom: 15px; 
}
button {
  padding: 10px 20px;
  font-size: 16px;
  margin-left: 10px;
  cursor: pointer;
}
#newTask {
    background-color: #26db6b;
    font-family: Verdana;
    border-radius: 10px;
    border-color: #ffffff;
    color: #cdf7e6
}
ul {
  list-style: none;
  padding: 0;
}

li {
  padding: 10px;
  margin: 5px 0;
  background-color: #f0f0f0;
  border-radius: 5px;
  display: flex;
  justify-content: space-between;
  align-items: center;
}
  </style>
</head>
<body>
 <h1>Список дел</h1>
 <div class="task">
  <div class="input-group">
    <input type="text" id="display">
    <button id="newTask">Добавить</button>
  </div>
  <ul id="taskList"></ul>
</div>
<button id="doneTask">Показать выполненые</button>
<button id="checkAllDone">Все ли выполнены?</button>
<button id="checkBread">Есть ли "Купить Хлеб"?</button>
<button id="showAll">Показать все</button>
<div id="result"></div>
  <script>
    const taskList = document.getElementById('taskList');
    const result = document.getElementById('result');
    let tasks = JSON.parse(localStorage.getItem('tasks')) || [];
    
    // Если старые данные = массив строк — конвертируем
    if (tasks.length > 0 && typeof tasks[0] === 'string') {
      tasks = tasks.map((text, index) => ({
        id: Date.now() + index,
        text,
        done: false
      }));
      localStorage.setItem('tasks', JSON.stringify(tasks));
    }

    // Основная функция отрисовки
    function renderTasks(tasksToShow) {
      taskList.innerHTML = '';
      tasksToShow.forEach(task => {
        const li = document.createElement('li');
        li.innerHTML = `
          <input type="checkbox" ${task.done ? 'checked' : ''} data-id="${task.id}">
          <span style="text-decoration: ${task.done ? 'line-through' : 'none'}">${task.text}</span>
          <button class="delete" data-id="${task.id}">Удалить</button>
        `;
        taskList.appendChild(li);
      });
      
      // Добавляем обработчики после отрисовки
      document.querySelectorAll('.delete').forEach(btn => {
        btn.addEventListener('click', deleteTask);
      });
      document.querySelectorAll('input[type="checkbox"]').forEach(checkbox => {
        checkbox.addEventListener('change', toggleDone);
      });
    }

    // Переключение статуса задачи
    function toggleDone(e) {
      const id = Number(e.target.dataset.id);
      tasks = tasks.map(task => 
        task.id === id ? { ...task, done: e.target.checked } : task
      );
      localStorage.setItem('tasks', JSON.stringify(tasks));
    }

    // Удаление задачи
    function deleteTask(e) {
      const id = Number(e.target.dataset.id);
      tasks = tasks.filter(task => task.id !== id);
      localStorage.setItem('tasks', JSON.stringify(tasks));
      renderTasks(tasks);
    }

    // Добавление задачи
    document.getElementById('newTask').addEventListener('click', () => {
      const input = document.getElementById('display');
      const text = input.value.trim();
      if (!text) return alert('Введите задачу!');
      
      const newTask = {
        id: Date.now(),
        text,
        done: false
      };
      
      tasks.push(newTask);
      localStorage.setItem('tasks', JSON.stringify(tasks));
      input.value = '';
      renderTasks(tasks);
    });

    document.getElementById('doneTask').addEventListener('click', () => {
      const doneTasks = tasks.filter(task => task.done);
      renderTasks(doneTasks);
    });

    document.getElementById('showAll').addEventListener('click', () => {
      renderTasks(tasks);
    });

    document.getElementById('checkAllDone').addEventListener('click', () => {
      const allDone = tasks.every(task => task.done);
      result.textContent = allDone 
        ? '✅ Все задачи выполнены!' 
        : '❌ Не все задачи выполнены';
    });

    document.getElementById('checkBread').addEventListener('click', () => {
      const hasBread = tasks.some(task => task.text === 'Купить хлеб');
      result.textContent = hasBread 
        ? '✅ Задача "Купить хлеб" есть!' 
        : '❌ Задачи "Купить хлеб" нет';
    });
    renderTasks(tasks);
  </script>
</body>
</html>